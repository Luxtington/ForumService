{{define "title"}}Список тредов{{end}}

{{define "content"}}
<div class="container mt-4">
    <h1>Список тредов</h1>
    
    <script>
        window.userId = {{if .user_id}}{{.user_id}}{{else}}null{{end}};
        window.userRole = "{{.user_role}}";
        console.log('Debug - User ID:', window.userId);
        console.log('Debug - User Role:', window.userRole);
    </script>
    
    <div class="row">
        {{range .threads}}
        <div class="col-md-12 mb-3">
            <div class="card">
                <div class="card-body">
                    <div class="thread-card">
                        <div class="thread-header">
                            <h3 class="thread-title">
                                <a href="/threads/{{.ID}}" class="text-decoration-none">{{.Title}}</a>
                            </h3>
                            {{if or (eq .AuthorID $.user_id) (eq $.user_role "admin")}}
                            <div class="thread-actions">
                                <button class="btn btn-sm btn-outline-primary edit-thread" data-thread-id="{{.ID}}">
                                    <i class="bi bi-pencil"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-danger delete-thread" data-thread-id="{{.ID}}">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </div>
                            {{end}}
                        </div>
                        <div class="thread-meta">
                            <span class="author">Автор: {{.AuthorName}}</span>
                            <span class="date">Создан: {{.CreatedAt.Format "02.01.2006 15:04"}}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {{end}}
    </div>
</div>
{{end}}

{{template "base.html" .}} 